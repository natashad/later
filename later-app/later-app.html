<head>
  <title>LATer</title>
</head>

<body>
  <div class="container">

    {{> loginButtons}}
    {{#if currentUser}}
    <header>
      <h1>My Bookmarks ({{incompleteCount}} new)</h1>
    </header>

    <!-- Add New Form -->
    <button class="primary-button new-item-trigger">Add New Item +</button>
    {{> addItemForm}}

    {{> filters}}

    <ul class="notifications-container">
      {{#each notifications}}
        {{> manageFriendship}}
      {{/each}}
    </ul>

    <ul class="list-container">
      {{#each tasks}}
        {{> task}}
      {{/each}}
    </ul>
    {{/if}}

    <ul class="manage-blocked-container">
      {{#each blockedFriends}}
        {{> manageBlocked}}
      {{/each}}
    </ul>

  </div>
</body>

<template name="filters">
  <label class="hide-completed filter">
    <input type="checkbox" checked="{{hideCompleted}}" />Hide Completed Items
  </label>
  <label class="article-filter filter">
    <input type="checkbox" checked="{{articleFilter}}" />Article
  </label>
  <label class="video-filter filter">
    <input type="checkbox" checked="{{videoFilter}}" />Video
  </label>
  <label class="music-filter filter">
    <input type="checkbox" checked="{{musicFilter}}" />Music
  </label>
  <label class="other-filter filter">
    <input type="checkbox" checked="{{otherFilter}}" />Other
  </label>
  <label class="inbox-filter filter">
    <input type="checkbox" checked="{{inboxFilter}}" />Inbox
  </label>
  <label class="outbox-filter filter">
    <input type="checkbox" checked="{{outboxFilter}}" />Outbox
  </label>
  {{#each friends}}
    {{> nameFilter}}
  {{/each}}
</template>

<template name="nameFilter">
  <label class="name-filter filter">
    <input type="checkbox" checked="{{isChecked}}" />{{getName}}
  </label>
</template>

<template name="task">
  <li class="{{#if checked}}checked{{/if}}">

    <div class="item-content">
      <i class="fa {{getTypeFontAwesome}}"></i>
        <a target="_blank" href="{{link}}" alt="{{#if title}}{{title}}{{else}}{{link}}{{/if}}">{{#if title}}{{title}}{{else}}{{link}}{{/if}}</a>
      ({{length}})
      {{#if isIncoming}}
        <span class="creator {{#if creatorIsReceiver}}me{{/if}}">{{#if creatorIsReceiver}}Me{{else}}{{getCreator}}{{/if}}</span>
        <span class="tag">Inbox</span>
      {{else}}
        <span class="creator">{{getReceiver}}</span>
        <span class="tag">Outbox</span>
      {{/if}}
      <div class="controls">
        {{#if isIncoming}}<label for="seen">Seen</label><input name="seen" type="checkbox" checked="{{checked}}" class="toggle-checked" />{{/if}}
        <button class="delete">&times;</button>
      </div>
    </div>

  </li>
</template>

<template name="manageFriendship">
  <li>
    {{getFriendName}} wants to connect with you.
    <button class="approve">Approve</button>
    <button class="block">Block</button>
  </li>
</template>

<template name="manageBlocked">
  <li>
    {{getFriendName}} <button class="approve">Approve</button>
  </li>
</template>

<template name="addItemForm">
  <form class="new-item-form">
    <div class="close-form"><a>x</a></div>
    <div class="entry error"></div>
    <div class="entry"><label for="item_receiver">For * </label>
      <input type="text" name="item_receiver" class="form-control typeahead" placeholder="Type to query"
         autocomplete="off" spellcheck="off"
         data-source="friends"
         data-min-length=0 />
    </div>
    <div class="entry"><label for="item_title">Title </label><input type="text" name="item_title" placeholder="" /></div>
    <div class="entry"><label for="item_link">Link * </label><input type="text" name="item_link" placeholder="" /></div>
    <div class="entry">
      <label for="item_type">Type </label>
      <select name="item_type">
        <option value="article">Article</option>
        <option value="video">Video</option>
        <option value="music">Music</option>
        <option value="other">Other</option>
      </select>
    </div>
    <div class="entry">
      <label for="item_length">Length </label>
      <select name="item_length">
        <option value="short">Short</option>
        <option value="medium">Medium</option>
        <option value="long">Long</option>
      </select>
    </div>
    <div class="entry"><label for="item_tags">Tags </label><input type="text" name="item_tags" placeholder="" /></div>
    <div class="entry submit"><button class="button primary-button" type="submit">Submit</button></div>
  </form>
</template>

<template name="friend-template">
       <p class="repo-language">{{language}}</p>
</template>
