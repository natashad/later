<head>
  <title>Later</title>
  <link href='https://fonts.googleapis.com/css?family=Lily+Script+One' rel='stylesheet' type='text/css'>
</head>

<body>

  <div class="top-bar">
  {{> loginButtons}}
  </div>

  <div class="container">

    <header>
      {{#if currentUser}}
        <!-- Add New Form -->
        <div class="dropdown new-item-dropdown">
          <button id="dLabel" class="btn btn-primary new-item-trigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">+</button>
          {{> addItemForm}}
        </div>
      {{/if}}
      <h1>Later...</h1>
    </header>

    {{#if currentUser}}
    <ul class="notifications-container">
      {{#each notifications}}
        {{> manageFriendship}}
      {{/each}}
    </ul>

    <div class="left-container">
      <div class="search-container">
        <i class="fa fa-search"></i><input type="text" class="search-bar" name="search" placeholder="Search" />
      </div>
      <div class="task-list">
        {{> taskList}}
      </div>
    </div>

    <div class="right-container">
      {{> filters}}

      {{#each friends}}
        {{> nameFilter}}
      {{/each}}

      {{#if hasBlockedFriends}}
        <div class="manage-blocked-container">
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="manageBlockedHeading">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" href="#manageBlockedCollapse" aria-expanded="false" aria-controls="manageBlockedCollapse">
                  Manage Blocked Users <i class="fa fa-caret-down"></i>
                </a>
              </h4>
            </div>
            <div id="manageBlockedCollapse" class="panel-collapse collapse" role="tabpanel" aria-labelledby="manageBlockedHeading">
              <div class="panel-body">
                <ul>
                {{#each blockedFriends}}
                  {{> manageBlocked}}
                {{/each}}
                </ul>
              </div>
            </div>
          </div>
        </div>
      {{/if}}
    </div>
    {{/if}}
  </div>
</body>

<template name="taskList">
  <ul class="list-container">
    {{#each tasks}}
      {{> task}}
    {{/each}}
  </ul>
</template>

<template name="filters">
  <label class="hide-completed filter">
    <input type="checkbox" checked="{{hideCompleted}}" />Hide Completed
  </label><br />

  <label class="article-filter filter">
    <input type="checkbox" checked="{{articleFilter}}" />Article
  </label>
  <label class="video-filter filter">
    <input type="checkbox" checked="{{videoFilter}}" />Video
  </label>
  <label class="music-filter filter">
    <input type="checkbox" checked="{{musicFilter}}" />Music
  </label>
  <label class="other-filter filter">
    <input type="checkbox" checked="{{otherFilter}}" />Other
  </label><br />

 <label class="inbox-filter filter">
    <input type="checkbox" checked="{{inboxFilter}}" />Inbox
  </label><br />
</template>

<template name="nameFilter">
  <button class="name-filter btn-default btn" data-checked="{{isChecked}}" data-uname="{{getName}}">{{getName}}</button>
</template>

<template name="task">
  <li class="{{#if checked}}checked{{/if}}">

    <div class="item-content">
      <div class="item-left">
        {{#if isIncoming}}<i class="fa fa-arrow-circle-o-down"></i>{{else}}<i class="fa fa-arrow-circle-o-up"></i>{{/if}}
      </div>
      <div class="item-right">
        <i class="fa {{getTypeFontAwesome}}"></i>
          <a target="_blank" href="{{link}}" alt="{{#if title}}{{title}}{{else}}{{link}}{{/if}}">{{#if title}}{{title}}{{else}}{{link}}{{/if}}</a>
        {{#if isIncoming}}
          <span class="creator {{#if creatorIsReceiver}}me{{/if}}">{{#if creatorIsReceiver}}Me{{else}}{{getCreator}}{{/if}}</span>
        {{else}}
          <span class="creator">{{getReceiver}}</span>
        {{/if}}
        <div class="tags">
          {{#each tags}}
            {{> tag}}
          {{/each}}
          <span class="tag new-tag">
            <i class="fa fa-tag"></i>
            <input type="text" placeholder="Add tag..."/>
          </span>
        </div>
        <div class="controls">
          {{#if isIncoming}}<button class="toggle-checked" alt="seen" data-checked="true"><i class="fa-check fa"></i></button>{{/if}}
          <button class="delete"><i class="fa fa-times"></i></button>
        </div>
      </div>
    </div>

  </li>
</template>

<template name="tag">
  <span class="tag"><i class="fa fa-tag"></i> {{getName}}</span>
</template>

<template name="manageFriendship">
  <li>
    {{getFriendName}} wants to connect with you.
    <button class="approve">Approve</button>
    <button class="block">Block</button>
  </li>
</template>

<template name="manageBlocked">
  <li>
     <span class="approve"><a href="#" title="approve"><i class="fa fa-plus-square"></i></a></span> {{getFriendName}}
  </li>
</template>

<template name="addItemForm">
  <div class="dropdown-menu" aria-labelledby="dLabel">
    <form class="new-item-form form-horizontal">
      <div class="entry error"></div>
      <div class="entry"><label for="item_receiver">For * </label>
        <input type="text" name="item_receiver" class="form-control typeahead" placeholder="Type to query"
           autocomplete="off" spellcheck="off"
           data-source="friends"
           data-min-length=0 />
      </div>
      <div class="entry"><label for="item_link">Link * </label><input type="text" name="item_link" placeholder="" /></div>
      <div class="entry submit"><button class="btn btn-primary" type="submit">Save</button></div>
    </form>
 </div>
</template>

<template name="friend-template">
       <p class="repo-language">{{language}}</p>
</template>
